#!/usr/bin/env bash
set -euo pipefail

# Hyprland session initialization script
# This script starts all necessary services for a complete Hyprland session

# Start portals early
/usr/lib/xdg-desktop-portal-hyprland &
/usr/lib/xdg-desktop-portal-gtk &

# Polkit authentication agent
/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &

# System tray daemons
nm-applet &
blueman-applet &

# UX components
mako &

# Wallpaper daemon
if ! pgrep -x swww >/dev/null; then 
    swww init
fi
swww img ~/.config/swww/wallpapers/01.jpeg --transition-type any &

# Panel
waybar &

# Display management
kanshi &

# Idle/lock management
hypridle &

echo "Hyprland session initialized successfully"
